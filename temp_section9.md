## 9. BOM (자재 명세서) 관리

### 9.1 BOM 개요

**BOM이란?**
- Bill of Materials (자재 명세서)
- 제품 1개를 생산하는데 필요한 원자재와 수량을 정의
- 생산 시 BOM에 정의된 재료가 자동으로 재고에서 차감됨

**BOM 구조 예시:**
```
완제품: 브레이크 패드 1세트
└─ 원자재 1: 마찰재 2개
└─ 원자재 2: 백플레이트 2개
└─ 원자재 3: 스프링 4개
```

**BOM 페이지 접속:**
① 좌측 메뉴에서 **"BOM 관리"** 클릭
② BOM 목록 화면이 표시됨

[스크린샷: BOM 관리 메인 화면]

### 💡 팁
- BOM은 완제품 품목에만 등록 가능합니다
- 하나의 완제품에 여러 개의 원자재를 등록할 수 있습니다
- BOM 등록 후에도 수정 가능합니다

### ⚠️ 주의사항
- BOM에 등록된 원자재의 재고가 부족하면 생산이 불가능합니다
- 생산 시 BOM 수량에 따라 자동으로 재고가 차감되므로 정확히 등록해야 합니다

---

### 9.2 BOM 등록하기

**따라하기:**

① BOM 관리 화면 우측 상단 **"+ 새 BOM"** 버튼 클릭
② BOM 등록 폼이 표시됨

[스크린샷: BOM 등록 폼]

③ **완제품 선택:**
```
완제품: "브레이크 패드 세트" 선택 (드롭다운)
BOM 코드: BOM-BPAD-001 (자동 생성)
```

④ **원자재 추가 - 첫 번째 재료:**
```
"+ 원자재 추가" 버튼 클릭
원자재: "마찰재" 선택
필요 수량: 2 입력
단위: "개" (품목에서 자동 가져옴)
```

⑤ **원자재 추가 - 두 번째 재료:**
```
다시 "+ 원자재 추가" 버튼 클릭
원자재: "백플레이트" 선택
필요 수량: 2 입력
```

⑥ **원자재 추가 - 세 번째 재료:**
```
다시 "+ 원자재 추가" 버튼 클릭
원자재: "스프링" 선택
필요 수량: 4 입력
```

⑦ **메모 입력 (선택사항):**
```
메모: "브레이크 패드 표준 BOM. 고온용 마찰재 사용."
```

⑧ **"저장" 버튼 클릭**

⑨ 성공 메시지 확인:
```
✅ "BOM이 성공적으로 등록되었습니다."
```

[스크린샷: BOM 등록 완료 후 목록]

### 💡 팁
- 원자재는 최대 50개까지 추가 가능합니다
- 같은 원자재를 중복 추가할 수 없습니다
- 원자재 목록에서 "✕" 버튼으로 항목 제거 가능합니다
- 수량은 소수점 가능합니다 (예: 0.5개, 1.25kg)

### ⚠️ 주의사항
- 완제품으로 이미 BOM이 등록된 품목은 다시 선택할 수 없습니다 (1품목 = 1 BOM)
- 원자재 품목은 재고가 관리되는 품목만 선택 가능합니다
- 필요 수량은 반드시 0보다 커야 합니다

---

### 9.3 BOM 조회 및 상세보기

**BOM 목록에서 조회:**

① BOM 관리 화면에서 목록 확인

**목록 표시 정보:**
```
┌──────────────┬─────────────────────┬──────────┬──────────────┬────────────┐
│ BOM 코드     │ 완제품명            │ 원자재 수│ 등록일       │ 활성 상태  │
├──────────────┼─────────────────────┼──────────┼──────────────┼────────────┤
│ BOM-BPAD-001 │ 브레이크 패드 세트  │ 3개      │ 2025-01-28   │ ✅ 활성    │
│ BOM-CUSH-001 │ 쿠션 어셈블리       │ 5개      │ 2025-01-25   │ ✅ 활성    │
│ BOM-FRAM-001 │ 프레임 어셈블리     │ 8개      │ 2025-01-20   │ ❌ 비활성  │
└──────────────┴─────────────────────┴──────────┴──────────────┴────────────┘
```

[스크린샷: BOM 목록]

② **BOM 행 클릭** → 상세 정보 모달 표시

**상세 정보 내용:**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
BOM 상세 정보
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

BOM 코드: BOM-BPAD-001
완제품: 브레이크 패드 세트 (PART-BPAD-001)
등록일: 2025-01-28 14:30
활성 상태: ✅ 활성

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
원자재 구성 (3개)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 마찰재 (MAT-FRIC-001)
   필요 수량: 2개
   현재 재고: 150개 ✅

2. 백플레이트 (MAT-BACK-001)
   필요 수량: 2개
   현재 재고: 200개 ✅

3. 스프링 (MAT-SPRG-001)
   필요 수량: 4개
   현재 재고: 5개 ⚠️ 부족

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
생산 가능 수량
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

현재 재고로 생산 가능: 1세트
(스프링 재고 부족으로 제한됨)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

메모: 브레이크 패드 표준 BOM. 고온용 마찰재 사용.
```

[스크린샷: BOM 상세 정보 모달]

### 💡 팁
- 원자재별 현재 재고가 실시간으로 표시됩니다
- 재고 부족 항목은 ⚠️ 경고 표시됩니다
- "생산 가능 수량"은 가장 부족한 원자재 기준으로 계산됩니다
- 상세 모달에서 바로 "수정" 또는 "삭제" 가능합니다

### ⚠️ 주의사항
- 비활성 BOM은 생산에 사용할 수 없습니다
- 재고 정보는 페이지 로드 시점 기준이므로 최신 정보는 새로고침 필요

---

### 9.4 BOM 수정하기

**따라하기:**

① BOM 목록에서 수정할 BOM 행 클릭
② 상세 정보 모달 우측 상단 **"수정"** 버튼 클릭
③ BOM 수정 폼이 표시됨

[스크린샷: BOM 수정 폼]

**수정 가능 항목:**

④ **원자재 수량 변경:**
```
기존: 마찰재 2개
변경: 마찰재 3개로 수정
```

⑤ **원자재 추가:**
```
"+ 원자재 추가" 버튼 클릭
새 원자재: "고정핀" 선택
필요 수량: 2개 입력
```

⑥ **원자재 제거:**
```
제거할 원자재 행의 "✕" 버튼 클릭
확인 메시지: "정말 이 원자재를 제거하시겠습니까?"
"확인" 클릭
```

⑦ **메모 수정:**
```
기존 메모: "브레이크 패드 표준 BOM. 고온용 마찰재 사용."
추가: "2025년 1월 개선: 마찰재 수량 증가"
```

⑧ **"저장" 버튼 클릭**

⑨ 성공 메시지 확인:
```
✅ "BOM이 성공적으로 수정되었습니다."
```

[스크린샷: BOM 수정 완료 후 상세보기]

### 💡 팁
- 완제품 품목은 수정할 수 없습니다 (변경 필요 시 삭제 후 재등록)
- BOM 코드도 자동 생성되어 수정 불가능합니다
- 원자재 추가/제거는 자유롭게 가능합니다
- 수정 시 변경 이력은 별도 로그에 기록됩니다

### ⚠️ 주의사항
- 이미 이 BOM으로 생산한 이력이 있는 경우, 수정 시 이전 생산 기록에는 영향 없음
- 원자재를 제거하면 복구할 수 없으니 신중히 선택하세요
- 수량 변경 시 기존 생산 계획에 영향을 줄 수 있습니다

---

### 9.5 BOM 삭제하기 (비활성화)

**따라하기:**

① BOM 목록에서 삭제할 BOM 행 클릭
② 상세 정보 모달 우측 상단 **"삭제"** 버튼 클릭

③ 확인 대화상자 표시:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ BOM 삭제 확인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

BOM 코드: BOM-BPAD-001
완제품: 브레이크 패드 세트

이 BOM을 삭제하시겠습니까?

※ 삭제된 BOM은 비활성 상태로 전환되며,
  생산에 사용할 수 없습니다.
※ 데이터는 보관되며 필요시 복구 가능합니다.

[취소]  [삭제]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

④ **"삭제" 버튼 클릭**

⑤ 성공 메시지 확인:
```
✅ "BOM이 비활성 상태로 전환되었습니다."
```

⑥ 목록에서 상태 확인:
```
BOM-BPAD-001 │ 브레이크 패드 세트 │ 3개 │ 2025-01-28 │ ❌ 비활성
```

[스크린샷: BOM 삭제 후 목록]

**비활성 BOM 복구하기:**

① 비활성 BOM 행 클릭
② 상세 정보 모달에서 **"활성화"** 버튼 클릭
③ 성공 메시지:
```
✅ "BOM이 활성 상태로 복구되었습니다."
```

### 💡 팁
- BOM 삭제는 "소프트 삭제"로 데이터가 완전히 삭제되지 않습니다
- 비활성 BOM은 목록에서 회색으로 표시됩니다
- 비활성 BOM도 이력 조회는 가능합니다
- 언제든지 활성화하여 재사용 가능합니다

### ⚠️ 주의사항
- 비활성 BOM은 생산 시 선택할 수 없습니다
- 이미 생산에 사용 중인 BOM을 삭제하면 향후 생산 계획에 영향을 줄 수 있습니다
- 실수로 삭제한 경우 즉시 활성화하세요

---

### 9.6 Excel로 BOM 템플릿 다운로드 및 대량 등록

**Step 1: BOM 템플릿 다운로드**

① BOM 관리 화면 우측 상단 **"Excel 템플릿 다운로드"** 버튼 클릭
② `BOM_Template.xlsx` 파일 다운로드

**템플릿 파일 구조:**
```
┌──────────────┬──────────────┬──────────────┬────────┬────────┐
│ 완제품코드   │ 원자재코드   │ 원자재명     │ 수량   │ 메모   │
├──────────────┼──────────────┼──────────────┼────────┼────────┤
│ (필수)       │ (필수)       │ (자동 매칭)  │ (필수) │ (선택) │
└──────────────┴──────────────┴──────────────┴────────┴────────┘
```

[스크린샷: BOM Excel 템플릿]

**Step 2: Excel 파일 작성**

③ Excel 파일 열기
④ 데이터 입력 예시:

```
┌──────────────────┬──────────────────┬──────────────┬────────┬──────────────────────┐
│ 완제품코드       │ 원자재코드       │ 원자재명     │ 수량   │ 메모                 │
├──────────────────┼──────────────────┼──────────────┼────────┼──────────────────────┤
│ PART-BPAD-001    │ MAT-FRIC-001     │ 마찰재       │ 2      │                      │
│ PART-BPAD-001    │ MAT-BACK-001     │ 백플레이트   │ 2      │                      │
│ PART-BPAD-001    │ MAT-SPRG-001     │ 스프링       │ 4      │                      │
│ PART-CUSH-001    │ MAT-FOAM-001     │ 폼재         │ 1      │ 고밀도 폼            │
│ PART-CUSH-001    │ MAT-FABR-001     │ 원단         │ 0.5    │ 평당 0.5m 사용       │
│ PART-CUSH-001    │ MAT-ZIPR-001     │ 지퍼         │ 1      │                      │
└──────────────────┴──────────────────┴──────────────┴────────┴──────────────────────┘
```

**작성 규칙:**
- 같은 완제품코드를 여러 행에 반복 입력 (각 행 = 원자재 1개)
- 완제품코드와 원자재코드는 시스템에 등록된 코드만 사용
- 수량은 숫자만 입력 (소수점 가능)
- 원자재명은 참고용 (시스템에서 자동 매칭)

⑤ 파일 저장 (.xlsx 형식 유지)

**Step 3: Excel 파일 업로드**

⑥ BOM 관리 화면 우측 상단 **"Excel 업로드"** 버튼 클릭
⑦ 파일 선택 대화상자에서 작성한 Excel 파일 선택
⑧ **"업로드"** 버튼 클릭

⑨ 업로드 진행 상태 표시:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📤 Excel 파일 처리 중...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 행 1: PART-BPAD-001 → MAT-FRIC-001 (성공)
✅ 행 2: PART-BPAD-001 → MAT-BACK-001 (성공)
✅ 행 3: PART-BPAD-001 → MAT-SPRG-001 (성공)
✅ 행 4: PART-CUSH-001 → MAT-FOAM-001 (성공)
✅ 행 5: PART-CUSH-001 → MAT-FABR-001 (성공)
⚠️  행 6: PART-CUSH-001 → MAT-ZIPR-001 (경고: 수량 0)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
처리 결과
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

총 행 수: 6개
성공: 5개
실패: 0개
경고: 1개 (수량이 0인 항목)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

⑩ **"닫기"** 버튼 클릭
⑪ BOM 목록에서 등록된 BOM 확인

[스크린샷: Excel 업로드 후 BOM 목록]

### 💡 팁
- 한 번에 최대 1,000행까지 업로드 가능합니다
- 중복 BOM (같은 완제품)은 자동으로 병합됩니다
- 기존 BOM에 새 원자재가 추가됩니다
- 템플릿의 헤더 행은 반드시 유지해야 합니다
- 실패한 행은 별도로 표시되며, 성공한 행만 등록됩니다

### ⚠️ 주의사항
- Excel 파일은 반드시 .xlsx 형식이어야 합니다 (.xls 불가)
- 완제품코드와 원자재코드는 대소문자를 정확히 입력해야 합니다
- 존재하지 않는 품목코드는 에러 처리됩니다
- 수량이 0 또는 음수인 경우 경고 처리됩니다
- 업로드 전 반드시 템플릿 형식을 확인하세요

---

### 9.7 BOM 기반 생산과 재고 자동 차감

**생산 시 BOM 자동 적용:**

생산 처리(섹션 6 참조) 시 BOM이 등록된 완제품을 선택하면 자동으로 원자재 재고가 차감됩니다.

**예시 시나리오:**

① 생산 처리 화면에서 완제품 선택:
```
생산 품목: "브레이크 패드 세트" 선택
생산 수량: 10세트 입력
```

② BOM 정보 자동 표시:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 BOM 정보 (자동 적용)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

BOM 코드: BOM-BPAD-001

원자재 소요량:
• 마찰재: 20개 필요 (현재 재고: 150개 ✅)
• 백플레이트: 20개 필요 (현재 재고: 200개 ✅)
• 스프링: 40개 필요 (현재 재고: 50개 ✅)

생산 가능: ✅ 예 (모든 원자재 재고 충분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

[스크린샷: BOM 기반 생산 미리보기]

③ **"생산 등록" 버튼 클릭**

④ 생산 처리 및 재고 자동 차감:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 생산 완료
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

생산 거래번호: PRD-2025-0128-003

완제품 재고 증가:
• 브레이크 패드 세트: +10세트

원자재 재고 차감:
• 마찰재: -20개 (150개 → 130개)
• 백플레이트: -20개 (200개 → 180개)
• 스프링: -40개 (50개 → 10개 ⚠️)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**재고 부족 시 경고:**

⑤ 만약 재고가 부족한 경우:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 재고 부족 경고
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

생산 수량: 20세트

원자재 소요량:
• 마찰재: 40개 필요 (현재 재고: 130개 ✅)
• 백플레이트: 40개 필요 (현재 재고: 180개 ✅)
• 스프링: 80개 필요 (현재 재고: 10개 ❌ 부족)

최대 생산 가능 수량: 2세트
(스프링 재고 기준)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

생산을 진행하시겠습니까?
• 진행 시 음수 재고가 발생합니다 (스프링: -70개)
• 권장: 생산 수량을 2세트로 조정하거나 원자재 입고 후 생산

[취소]  [그래도 진행]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

[스크린샷: 재고 부족 경고 메시지]

### 💡 팁
- BOM이 없는 품목은 생산 시 원자재 차감이 없습니다
- 생산 이력에서 어떤 원자재가 얼마나 차감되었는지 확인 가능합니다
- 생산 취소 시 원자재 재고도 자동으로 복구됩니다
- 음수 재고도 허용되지만 경고 표시됩니다

### ⚠️ 주의사항
- BOM 정보는 생산 시점 기준으로 적용됩니다 (나중에 BOM 수정해도 과거 생산에는 영향 없음)
- 생산 후 BOM을 수정하면 다음 생산부터 새 BOM이 적용됩니다
- 원자재 재고가 음수가 되는 것을 허용하지만, 실제 재고 관리에 주의하세요
- 생산 등록 전 반드시 BOM 정보를 확인하세요

---
