# 배치 생산 UI 수동 검증 가이드

**문서 정보**
- **작성일**: 2025년 11월 14일
- **버전**: 1.0
- **작성자**: Claude Code (SuperClaude Framework)
- **검증 대상**: Wave 1-2 배치 생산 UI 구현

---

## 📋 목차

1. [검증 개요](#검증-개요)
2. [환경 설정](#환경-설정)
3. [검증 체크리스트](#검증-체크리스트)
   - [3.1 한글 텍스트 검증](#31-한글-텍스트-검증)
   - [3.2 다크 모드 검증](#32-다크-모드-검증)
   - [3.3 기능 테스트](#33-기능-테스트)
   - [3.4 코드 품질 검증](#34-코드-품질-검증)
4. [스크린샷 캡처 가이드](#스크린샷-캡처-가이드)
5. [피드백 작성 방법](#피드백-작성-방법)
6. [이슈 리포팅 가이드](#이슈-리포팅-가이드)
7. [검증 완료 기준](#검증-완료-기준)
8. [부록](#부록)
   - [A. 구현된 컴포넌트 기술 스펙](#부록-a-구현된-컴포넌트-기술-스펙)
   - [B. API 엔드포인트 정보](#부록-b-api-엔드포인트-정보)
   - [C. 트러블슈팅 가이드](#부록-c-트러블슈팅-가이드)

---

## 검증 개요

### 목적
Wave 1-2에서 구현된 배치 생산 UI가 다음 요구사항을 충족하는지 확인합니다:
- ✅ 한글 UI 텍스트가 정확하게 표시됨
- ✅ 다크 모드에서 모든 요소가 정상 작동
- ✅ 핵심 기능이 의도대로 작동
- ✅ 코드 품질 기준 충족

### 예상 소요 시간
- **기본 검증**: 10-15분
- **상세 검증**: 20-30분 (스크린샷 포함)

### 검증 범위
- **Wave 1**: 배치 모드 토글 UI, ProductionItem 타입
- **Wave 2**: BatchItemsTable 컴포넌트, BOMPreviewPanel 탭 확장

### 검증 제외 항목
- ❌ 폼 제출 및 백엔드 API 통합 (이미 검증됨)
- ❌ 인증/권한 시스템 (미구현)
- ❌ 성능 벤치마크 (별도 테스트)

---

## 환경 설정

### 1. 개발 서버 시작

```bash
# 프로젝트 루트 디렉토리에서
npm run dev:safe

# 또는 기본 dev 명령어
npm run dev
```

**확인사항:**
- ✅ 서버가 port 5000에서 실행됨
- ✅ 컴파일 에러 없음
- ✅ Next.js 14.2.16 사용 중

### 2. 브라우저 접속

**URL**: http://localhost:5000/inventory

**권장 브라우저**:
- Chrome/Edge (최신 버전)
- Firefox (최신 버전)

### 3. 개발자 도구 준비

**F12** 또는 **Ctrl+Shift+I**로 개발자 도구 열기

**활용 탭**:
- **Elements**: DOM 구조 및 스타일 확인
- **Console**: 에러 메시지 확인
- **Network**: API 호출 모니터링
- **Application**: localStorage, 다크모드 설정

### 4. 다크 모드 설정 (선택사항)

**Chrome/Edge**:
1. 개발자 도구 열기 (F12)
2. 상단의 **⋮** (More tools) → **Rendering**
3. "Emulate CSS media feature prefers-color-scheme" → **dark** 선택

**시스템 다크 모드**:
- Windows: 설정 → 개인 설정 → 색 → 다크
- 브라우저가 자동으로 반영

---

## 검증 체크리스트

## 3.1 한글 텍스트 검증

### 목적
모든 UI 텍스트가 한글로 올바르게 표시되는지 확인합니다.

### 사전 준비
1. http://localhost:5000/inventory 접속
2. 상단 탭에서 **"생산입고"** 클릭
3. 생산 입고 폼이 표시되는지 확인

---

### 3.1.1 배치 모드 토글 UI

**위치**: 생산입고 폼 상단, 거래일 입력 필드 바로 아래

**확인 항목**:

| 순번 | 요소 | 예상 텍스트 | 확인 | 비고 |
|------|------|-------------|------|------|
| 1 | 토글 라벨 | "일괄 등록 모드" | [ ] | 좌측에 라벨, 우측에 토글 스위치 |
| 2 | 토글 상태 (OFF) | 회색 배경, "OFF" 텍스트 없음 | [ ] | 기본값은 OFF |
| 3 | 토글 상태 (ON) | 파란색 배경, 스위치가 우측으로 이동 | [ ] | 클릭 시 전환 |

**스크린샷 캡처**:
- 📸 `01_toggle_off.png`: 토글 OFF 상태
- 📸 `02_toggle_on.png`: 토글 ON 상태

**테스트 시나리오**:
1. 토글을 OFF → ON으로 전환
2. 싱글 입력 필드가 사라지고 배치 테이블이 표시되는지 확인
3. 토글을 ON → OFF로 전환
4. 배치 테이블이 사라지고 싱글 입력 필드가 다시 나타나는지 확인

---

### 3.1.2 배치 아이템 테이블 헤더

**위치**: 토글 ON 상태, 테이블 최상단

**확인 항목**:

| 순번 | 헤더명 | 예상 텍스트 | 확인 | 설명 |
|------|--------|-------------|------|------|
| 1 | 제품 선택 | "제품 선택" | [ ] | 첫 번째 컬럼, ItemSelect 드롭다운 |
| 2 | 제품 코드 | "제품코드" | [ ] | 자동으로 채워지는 읽기 전용 필드 |
| 3 | 제품명 | "제품명" | [ ] | 자동으로 채워지는 읽기 전용 필드 |
| 4 | 생산 수량 | "생산수량" | [ ] | 숫자 입력 필드 |
| 5 | 단가 | "단가" | [ ] | 자동으로 채워지는 읽기 전용 필드 |
| 6 | 금액 | "금액" | [ ] | 자동 계산 (수량 × 단가) |
| 7 | 참조번호 | "참조번호" (선택사항) | [ ] | 텍스트 입력 필드 |
| 8 | 비고 | "비고" (선택사항) | [ ] | 텍스트 입력 필드 |
| 9 | 작업 | "작업" 또는 빈 헤더 | [ ] | 삭제 버튼 (휴지통 아이콘) |

**스크린샷 캡처**:
- 📸 `03_table_headers.png`: 테이블 헤더 전체 캡처

**추가 확인사항**:
- [ ] 헤더 텍스트가 굵은 글씨로 표시됨
- [ ] 헤더 배경색이 다른 행과 구분됨 (밝은 회색/어두운 회색)
- [ ] 헤더가 스크롤 시 고정되지 않음 (일반 테이블)

---

### 3.1.3 "제품 추가" 버튼

**위치**: 배치 테이블 하단, 좌측

**확인 항목**:

| 순번 | 요소 | 예상 텍스트/모양 | 확인 | 비고 |
|------|------|------------------|------|------|
| 1 | 버튼 텍스트 | "제품 추가" 또는 "+ 제품 추가" | [ ] | 좌측 정렬 |
| 2 | 버튼 색상 (라이트) | 파란색 배경, 흰색 텍스트 | [ ] | `bg-blue-500` |
| 3 | 버튼 색상 (다크) | 파란색 배경, 흰색 텍스트 | [ ] | `dark:bg-blue-600` |
| 4 | 호버 효과 | 약간 어두운 파란색으로 변경 | [ ] | `hover:bg-blue-600` |

**스크린샷 캡처**:
- 📸 `04_add_button.png`: "제품 추가" 버튼

**테스트 시나리오**:
1. "제품 추가" 버튼 클릭
2. 테이블에 새로운 빈 행이 추가되는지 확인
3. 행 번호가 1부터 시작하는지 확인

---

### 3.1.4 BOM 미리보기 패널 헤더

**위치**: 배치 테이블 우측 또는 하단, 패널 상단

**확인 항목**:

| 순번 | 요소 | 예상 텍스트 | 확인 | 비고 |
|------|------|-------------|------|------|
| 1 | 패널 제목 | "BOM 미리보기" | [ ] | 좌측 상단 |
| 2 | 제품 개수 표시 | "제품 2개" (예시) | [ ] | 배치 모드일 때만 표시 |
| 3 | 새로고침 버튼 | 아이콘만 표시 (↻) | [ ] | 우측 상단 |

**스크린샷 캡처**:
- 📸 `05_bom_panel_header.png`: BOM 패널 헤더

---

### 3.1.5 BOM 탭 네비게이션

**위치**: BOM 미리보기 패널 헤더 바로 아래

**확인 항목**:

| 순번 | 요소 | 예상 형식 | 확인 | 비고 |
|------|------|----------|------|------|
| 1 | 탭 레이아웃 | 가로 스크롤 가능한 탭 리스트 | [ ] | `flex overflow-x-auto` |
| 2 | 탭 텍스트 | `[제품코드] 제품명` | [ ] | 예: "PROD001 부품A" |
| 3 | 제품명 줄임 | 200px 초과 시 "..." 표시 | [ ] | `max-w-[200px] truncate` |
| 4 | 활성 탭 스타일 | 파란색 하단 보더, 흰색 배경 | [ ] | `border-b-2 border-blue-500` |
| 5 | 비활성 탭 스타일 | 회색 텍스트, 투명 배경 | [ ] | `text-gray-600` |

**스크린샷 캡처**:
- 📸 `06_bom_tabs.png`: 탭 네비게이션 (3개 제품 추가 후)

**테스트 시나리오**:
1. 최소 3개의 제품을 배치 테이블에 추가
2. 각 제품마다 다른 품목 선택
3. BOM 패널에 3개의 탭이 생성되는지 확인
4. 각 탭에 제품코드와 제품명이 표시되는지 확인

---

### 3.1.6 빈 상태 메시지

**위치**: BOM 미리보기 패널 내부, 제품 미선택 시

**확인 항목**:

| 순번 | 상황 | 예상 메시지 | 확인 | 비고 |
|------|------|-------------|------|------|
| 1 | 배치 모드, 제품 0개 | "배치 모드에서는 각 제품을 선택하고 탭을 클릭하여 BOM을 확인하세요" | [ ] | 회색 텍스트 |
| 2 | 배치 모드, 제품 선택 안 함 | 동일 메시지 | [ ] | 제품 추가했지만 품목 미선택 |
| 3 | 싱글 모드, 제품 미선택 | "제품을 선택하면 BOM 정보가 여기에 표시됩니다" | [ ] | 기존 메시지 |

**스크린샷 캡처**:
- 📸 `07_empty_state_batch.png`: 배치 모드 빈 상태
- 📸 `08_empty_state_single.png`: 싱글 모드 빈 상태

---

### 3.1.7 종합 체크

**모든 한글 텍스트 확인 완료**:
- [ ] 토글 라벨
- [ ] 테이블 헤더 (9개 컬럼)
- [ ] "제품 추가" 버튼
- [ ] BOM 패널 제목
- [ ] 탭 텍스트 형식
- [ ] 빈 상태 메시지 (2종)

**발견된 이슈**:
```
(이슈가 있다면 여기에 기록)
예: "제품코드" 헤더가 "Product Code"로 표시됨
```

---

## 3.2 다크 모드 검증

### 목적
다크 모드에서 모든 UI 요소가 올바르게 표시되고 가독성이 유지되는지 확인합니다.

### 사전 준비
1. 다크 모드 활성화 (환경 설정 섹션 참조)
2. http://localhost:5000/inventory 새로고침
3. "생산입고" 탭으로 이동
4. 배치 모드 토글 ON

---

### 3.2.1 배치 모드 토글 (다크 모드)

**확인 항목**:

| 순번 | 요소 | 라이트 모드 색상 | 다크 모드 색상 | 확인 | 비고 |
|------|------|-----------------|---------------|------|------|
| 1 | 토글 라벨 텍스트 | 검은색 (#000) | 흰색/밝은 회색 | [ ] | 읽기 쉬워야 함 |
| 2 | 토글 OFF 배경 | 회색 (#d1d5db) | 어두운 회색 | [ ] | 명확한 대비 |
| 3 | 토글 ON 배경 | 파란색 (#3b82f6) | 동일 또는 약간 밝음 | [ ] | 색상 일관성 |

**스크린샷 캡처**:
- 📸 `09_dark_toggle.png`: 다크 모드 토글 UI

---

### 3.2.2 배치 아이템 테이블 (다크 모드)

**확인 항목**:

| 순번 | 요소 | 다크 모드 색상 | 확인 | 비고 |
|------|------|---------------|------|------|
| 1 | 테이블 배경 | 어두운 회색 (#1f2937) | [ ] | `dark:bg-gray-800` |
| 2 | 테이블 헤더 배경 | 더 어두운 회색 (#111827) | [ ] | `dark:bg-gray-900` |
| 3 | 테이블 헤더 텍스트 | 밝은 회색/흰색 | [ ] | `dark:text-gray-100` |
| 4 | 테이블 행 배경 (홀수) | 배경과 동일 | [ ] | Stripe 없음 |
| 5 | 테이블 행 배경 (짝수) | 약간 밝은 회색 | [ ] | `dark:bg-gray-700` (선택사항) |
| 6 | 테이블 보더 | 어두운 회색 (#374151) | [ ] | `dark:border-gray-700` |
| 7 | 입력 필드 배경 | 어두운 회색 (#374151) | [ ] | `dark:bg-gray-700` |
| 8 | 입력 필드 텍스트 | 흰색/밝은 회색 | [ ] | `dark:text-white` |
| 9 | 입력 필드 보더 | 회색 (#6b7280) | [ ] | `dark:border-gray-600` |
| 10 | 삭제 버튼 아이콘 | 빨간색 (#ef4444) | [ ] | `text-red-500` 동일 |

**스크린샷 캡처**:
- 📸 `10_dark_table.png`: 다크 모드 배치 테이블 (2-3행 추가 후)

**테스트 시나리오**:
1. 제품 3개 추가
2. 각 행의 배경색이 구분되는지 확인
3. 입력 필드에 포커스 했을 때 보더가 강조되는지 확인 (파란색)
4. 텍스트 가독성 확인

---

### 3.2.3 "제품 추가" 버튼 (다크 모드)

**확인 항목**:

| 순번 | 상태 | 다크 모드 색상 | 확인 | 비고 |
|------|------|---------------|------|------|
| 1 | 기본 상태 | 파란색 배경 (#2563eb) | [ ] | `dark:bg-blue-600` |
| 2 | 호버 상태 | 더 밝은 파란색 (#1d4ed8) | [ ] | `dark:hover:bg-blue-700` |
| 3 | 텍스트 색상 | 흰색 | [ ] | 라이트 모드와 동일 |

**스크린샷 캡처**:
- 📸 `11_dark_add_button.png`: 다크 모드 "제품 추가" 버튼

---

### 3.2.4 BOM 탭 네비게이션 (다크 모드)

**확인 항목**:

| 순번 | 요소 | 다크 모드 색상 | 확인 | 비고 |
|------|------|---------------|------|------|
| 1 | 활성 탭 배경 | 흰색 또는 밝은 회색 | [ ] | `dark:bg-gray-700` |
| 2 | 활성 탭 텍스트 | 파란색 | [ ] | `dark:text-blue-400` |
| 3 | 활성 탭 보더 | 파란색 (#3b82f6) | [ ] | 하단 2px 보더 |
| 4 | 비활성 탭 배경 | 투명 | [ ] | 배경 없음 |
| 5 | 비활성 탭 텍스트 | 회색 | [ ] | `dark:text-gray-400` |
| 6 | 비활성 탭 호버 배경 | 어두운 회색 | [ ] | `dark:hover:bg-gray-800` |

**스크린샷 캡처**:
- 📸 `12_dark_tabs.png`: 다크 모드 탭 네비게이션

**테스트 시나리오**:
1. 탭 3개 생성 (제품 3개 추가)
2. 각 탭에 마우스 호버 시 배경색 변화 확인
3. 탭 클릭 시 활성 상태 스타일 변경 확인

---

### 3.2.5 BOM 미리보기 패널 (다크 모드)

**확인 항목**:

| 순번 | 요소 | 다크 모드 색상 | 확인 | 비고 |
|------|------|---------------|------|------|
| 1 | 패널 배경 | 어두운 회색 (#1f2937) | [ ] | `dark:bg-gray-800` |
| 2 | 패널 제목 텍스트 | 밝은 회색/흰색 | [ ] | `dark:text-gray-100` |
| 3 | 새로고침 버튼 | 파란색 또는 회색 | [ ] | 아이콘 색상 |
| 4 | BOM 항목 리스트 배경 | 약간 어두운 회색 | [ ] | `dark:bg-gray-700` |
| 5 | BOM 항목 텍스트 | 밝은 회색/흰색 | [ ] | `dark:text-gray-100` |
| 6 | 재고 부족 경고 | 빨간색 유지 | [ ] | `text-red-500` |
| 7 | 재고 충분 표시 | 초록색 유지 | [ ] | `text-green-500` |

**스크린샷 캡처**:
- 📸 `13_dark_bom_panel.png`: 다크 모드 BOM 패널 (데이터 있는 상태)

---

### 3.2.6 다크 모드 종합 체크

**모든 요소 다크 모드 호환성 확인**:
- [ ] 토글 UI
- [ ] 배치 테이블 (헤더, 행, 입력 필드)
- [ ] "제품 추가" 버튼
- [ ] 탭 네비게이션 (활성/비활성 상태)
- [ ] BOM 미리보기 패널

**가독성 평가**:
- [ ] 모든 텍스트가 충분한 대비를 가지고 읽기 쉬움
- [ ] 버튼과 입력 필드의 경계가 명확함
- [ ] 활성/비활성 상태가 시각적으로 구분됨

**발견된 이슈**:
```
(이슈가 있다면 여기에 기록)
예: 비활성 탭 텍스트가 너무 어두워서 읽기 어려움
```

---

## 3.3 기능 테스트

### 목적
모든 핵심 기능이 의도대로 작동하는지 확인합니다.

---

### 3.3.1 모드 전환 테스트

**목적**: 싱글 모드 ↔ 배치 모드 전환이 정상적으로 작동하는지 확인

#### 시나리오 1: 싱글 → 배치 모드 전환

**사전 조건**: 배치 모드 토글이 OFF 상태

**단계**:
1. [ ] 토글을 OFF → ON으로 전환
2. [ ] 싱글 입력 필드가 숨겨지는지 확인:
   - "제품 선택" 드롭다운이 사라짐
   - "생산수량" 입력 필드가 사라짐
   - "단가" 입력 필드가 사라짐
3. [ ] 배치 UI 요소가 표시되는지 확인:
   - 배치 아이템 테이블이 표시됨
   - "제품 추가" 버튼이 표시됨
   - 테이블이 비어있음 (0개 제품)
4. [ ] BOM 미리보기 패널 메시지 변경:
   - "배치 모드에서는 각 제품을 선택하고 탭을 클릭하여 BOM을 확인하세요" 표시

**예상 결과**: 부드러운 전환, 에러 없음

**스크린샷 캡처**:
- 📸 `14_mode_switch_single_to_batch.png`

#### 시나리오 2: 배치 → 싱글 모드 전환

**사전 조건**: 배치 모드 ON, 제품 2-3개 추가됨

**단계**:
1. [ ] 토글을 ON → OFF로 전환
2. [ ] 배치 UI 요소가 숨겨지는지 확인:
   - 배치 아이템 테이블이 사라짐
   - "제품 추가" 버튼이 사라짐
   - 탭 네비게이션이 사라짐
3. [ ] 싱글 입력 필드가 다시 표시되는지 확인:
   - "제품 선택" 드롭다운
   - "생산수량" 입력 필드
   - "단가" 입력 필드
4. [ ] 이전에 입력한 배치 데이터가 유지되는지 확인:
   - (현재는 유지되지 않을 수 있음 - 향후 개선 사항)
5. [ ] 경고 메시지 없이 전환되는지 확인
   - (데이터 유실 경고는 향후 구현 예정)

**예상 결과**: 부드러운 전환, 에러 없음

**스크린샷 캡처**:
- 📸 `15_mode_switch_batch_to_single.png`

---

### 3.3.2 제품 추가/제거 테스트

#### 시나리오 3: 제품 추가

**사전 조건**: 배치 모드 ON, 테이블이 비어있음

**단계**:
1. [ ] "제품 추가" 버튼 클릭
2. [ ] 새로운 빈 행이 테이블 하단에 추가되는지 확인
3. [ ] 행 번호가 "1"로 표시되는지 확인 (행 번호 열이 있는 경우)
4. [ ] 모든 입력 필드가 비어있는지 확인:
   - 제품 선택: 드롭다운 기본값 (선택하세요)
   - 제품코드: 비어있음
   - 제품명: 비어있음
   - 생산수량: 0 또는 비어있음
   - 단가: 0 또는 비어있음
   - 금액: 0
5. [ ] "제품 추가" 버튼을 2번 더 클릭
6. [ ] 총 3개의 행이 생성되는지 확인
7. [ ] 행 번호가 1, 2, 3으로 증가하는지 확인

**예상 결과**: 매 클릭마다 새 행 추가, 행 번호 자동 증가

**스크린샷 캡처**:
- 📸 `16_add_products.png`: 3개 제품 추가 후

#### 시나리오 4: 제품 선택 및 자동 채우기

**사전 조건**: 배치 모드 ON, 빈 행 1개 이상

**단계**:
1. [ ] 첫 번째 행의 "제품 선택" 드롭다운 클릭
2. [ ] 제품 목록이 표시되는지 확인
3. [ ] 제품 하나를 선택 (예: "PROD001 - 부품A")
4. [ ] 다음 필드가 자동으로 채워지는지 확인:
   - **제품코드**: 선택한 제품의 코드 (예: "PROD001")
   - **제품명**: 선택한 제품의 이름 (예: "부품A")
   - **단가**: 선택한 제품의 unit_price (예: "10,000")
5. [ ] 필드들이 읽기 전용(disabled)으로 표시되는지 확인
6. [ ] 두 번째 행에서 다른 제품 선택
7. [ ] 각 행이 독립적으로 동작하는지 확인

**예상 결과**: 제품 선택 시 자동으로 코드, 이름, 단가 채워짐

**스크린샷 캡처**:
- 📸 `17_product_selected.png`: 제품 선택 후

#### 시나리오 5: 수량 입력 및 금액 자동 계산

**사전 조건**: 제품 선택됨, 단가 10,000원

**단계**:
1. [ ] "생산수량" 필드에 "5" 입력
2. [ ] "금액" 필드가 자동으로 "50,000"으로 계산되는지 확인
3. [ ] 수량을 "10"으로 변경
4. [ ] 금액이 "100,000"으로 업데이트되는지 확인
5. [ ] 수량에 음수 입력 시도 (예: "-5")
6. [ ] 음수가 입력되지 않거나 에러 메시지가 표시되는지 확인
   - (브라우저 기본 validation 또는 커스텀 validation)
7. [ ] 수량에 소수점 입력 시도 (예: "5.5")
8. [ ] 소수점이 처리되는지 확인 (허용/반올림/에러)

**예상 결과**: 금액 = 수량 × 단가, 자동 계산 및 포맷팅

**스크린샷 캡처**:
- 📸 `18_quantity_and_amount.png`: 수량 입력 및 금액 계산

#### 시나리오 6: 제품 제거

**사전 조건**: 제품 3개 추가됨

**단계**:
1. [ ] 두 번째 행의 삭제 버튼 (휴지통 아이콘) 클릭
2. [ ] 해당 행이 즉시 제거되는지 확인
3. [ ] 남은 제품이 2개인지 확인
4. [ ] 행 번호가 자동으로 재정렬되는지 확인:
   - 이전: 1, 2, 3
   - 이후: 1, 2 (두 번째 행이 제거되고 세 번째가 두 번째로 이동)
5. [ ] 첫 번째 행 제거
6. [ ] 남은 제품이 1개인지 확인
7. [ ] 마지막 제품도 제거
8. [ ] 테이블이 비어있는 상태로 돌아가는지 확인

**예상 결과**: 삭제 즉시 행 제거, 행 번호 자동 재정렬

**스크린샷 캡처**:
- 📸 `19_product_removed.png`: 제품 제거 후

---

### 3.3.3 탭 네비게이션 테스트

#### 시나리오 7: 탭 생성 및 표시

**사전 조건**: 배치 모드 ON, 테이블 비어있음

**단계**:
1. [ ] 제품 3개 추가
2. [ ] 각 제품마다 다른 품목 선택:
   - 첫 번째: PROD001 - 부품A
   - 두 번째: PROD002 - 부품B
   - 세 번째: PROD003 - 부품C
3. [ ] BOM 미리보기 패널에 탭이 생성되는지 확인
4. [ ] 탭 개수가 제품 개수와 일치하는지 확인 (3개)
5. [ ] 각 탭의 텍스트 형식 확인:
   - 첫 번째 탭: "PROD001 부품A"
   - 두 번째 탭: "PROD002 부품B"
   - 세 번째 탭: "PROD003 부품C"
6. [ ] 첫 번째 탭이 기본으로 활성화되어 있는지 확인
7. [ ] 활성 탭이 파란색 하단 보더로 표시되는지 확인

**예상 결과**: 제품 개수만큼 탭 생성, 첫 번째 탭 자동 활성화

**스크린샷 캡처**:
- 📸 `20_tabs_created.png`: 3개 탭 생성 후

#### 시나리오 8: 제품명 길이 처리

**사전 조건**: 배치 모드 ON

**단계**:
1. [ ] 긴 제품명을 가진 제품 선택 (30자 이상)
2. [ ] 탭에서 제품명이 잘리는지 확인 (200px 제한)
3. [ ] 잘린 부분이 "..."로 표시되는지 확인 (ellipsis)
4. [ ] 탭에 마우스 호버 시 전체 제품명이 툴팁으로 표시되는지 확인
   - (툴팁 구현 여부 확인)

**예상 결과**: 긴 제품명은 truncate 처리, ellipsis 표시

**스크린샷 캡처**:
- 📸 `21_long_product_name.png`: 긴 제품명 처리

#### 시나리오 9: 탭 전환

**사전 조건**: 제품 3개, 탭 3개 생성됨

**단계**:
1. [ ] 첫 번째 탭 클릭
2. [ ] 첫 번째 제품의 BOM이 표시되는지 확인
3. [ ] 활성 탭 스타일 확인:
   - 파란색 하단 보더
   - 파란색 텍스트
   - 흰색 배경 (다크 모드: 밝은 회색 배경)
4. [ ] 두 번째 탭 클릭
5. [ ] 두 번째 제품의 BOM이 표시되는지 확인
6. [ ] 첫 번째 탭의 활성 스타일이 제거되는지 확인
7. [ ] 두 번째 탭이 활성 스타일로 변경되는지 확인
8. [ ] 세 번째 탭 클릭
9. [ ] 세 번째 제품의 BOM이 표시되는지 확인

**예상 결과**: 탭 클릭 시 BOM 데이터 전환, 활성 스타일 이동

**스크린샷 캡처**:
- 📸 `22_tab_switching.png`: 세 번째 탭 활성화 상태

#### 시나리오 10: 탭 호버 효과

**사전 조건**: 제품 3개, 탭 3개 생성됨

**단계**:
1. [ ] 비활성 탭에 마우스 호버
2. [ ] 배경색이 변경되는지 확인 (약간 밝아짐)
3. [ ] 활성 탭에 마우스 호버
4. [ ] 배경색이 변경되지 않는지 확인 (이미 활성)
5. [ ] 마우스를 떼면 원래 스타일로 돌아가는지 확인

**예상 결과**: 비활성 탭 호버 시 배경색 변화, 활성 탭은 변화 없음

---

### 3.3.4 BOM 미리보기 업데이트 테스트

#### 시나리오 11: BOM 데이터 로드

**사전 조건**: 제품 1개 선택됨, BOM 등록된 제품

**단계**:
1. [ ] 제품 선택 직후 BOM이 자동으로 로드되는지 확인
2. [ ] BOM 패널에 다음 정보가 표시되는지 확인:
   - 필요한 원자재 목록
   - 각 원자재의 소요량
   - 현재 재고량
   - 부족 여부 표시 (빨강/초록)
3. [ ] 새로고침 버튼 클릭
4. [ ] BOM 데이터가 다시 로드되는지 확인
5. [ ] 로딩 인디케이터가 표시되는지 확인 (있는 경우)

**예상 결과**: 제품 선택 시 BOM 자동 로드, 새로고침 버튼 정상 작동

**스크린샷 캡처**:
- 📸 `23_bom_loaded.png`: BOM 데이터 로드 후

#### 시나리오 12: 탭별 BOM 독립성

**사전 조건**: 제품 3개, 각각 다른 BOM 등록됨

**단계**:
1. [ ] 첫 번째 탭 클릭
2. [ ] 첫 번째 제품의 BOM 항목 기록 (예: 원자재 A, B)
3. [ ] 두 번째 탭 클릭
4. [ ] 두 번째 제품의 BOM 항목 기록 (예: 원자재 C, D)
5. [ ] 첫 번째와 두 번째 BOM이 다른지 확인
6. [ ] 세 번째 탭 클릭
7. [ ] 세 번째 제품의 BOM 항목 기록 (예: 원자재 E, F)
8. [ ] 첫 번째 탭으로 다시 돌아가기
9. [ ] 첫 번째 제품의 BOM이 그대로 유지되는지 확인 (A, B)
10. [ ] BOM 데이터가 섞이지 않았는지 확인

**예상 결과**: 각 탭의 BOM 데이터가 독립적으로 유지됨

**스크린샷 캡처**:
- 📸 `24_bom_independence.png`: 다른 탭의 BOM 비교

#### 시나리오 13: BOM 없는 제품 처리

**사전 조건**: BOM이 등록되지 않은 제품 선택

**단계**:
1. [ ] BOM 없는 제품 선택
2. [ ] BOM 패널에 안내 메시지가 표시되는지 확인:
   - "이 제품에는 BOM이 등록되어 있지 않습니다"
   - 또는 빈 상태 메시지
3. [ ] 에러가 발생하지 않는지 확인
4. [ ] 다른 탭으로 전환했다가 다시 돌아오기
5. [ ] 동일한 메시지가 표시되는지 확인

**예상 결과**: BOM 없는 경우 안내 메시지 표시, 에러 없음

**스크린샷 캡처**:
- 📸 `25_bom_not_found.png`: BOM 없는 제품

---

### 3.3.5 폼 제출 테스트 (선택사항)

**⚠️ 주의**: 이 테스트는 백엔드 API와 실제로 통신하므로 신중하게 진행하세요.

#### 시나리오 14: 배치 등록 제출

**사전 조건**: 배치 모드 ON, 제품 2-3개 추가, 모든 필수 필드 입력

**단계**:
1. [ ] 폼 상단의 거래일 입력
2. [ ] 각 제품의 생산수량 입력
3. [ ] "저장" 또는 "등록" 버튼 클릭
4. [ ] 개발자 도구 Network 탭 열기
5. [ ] POST 요청이 `/api/inventory/production/batch`로 전송되는지 확인
6. [ ] 요청 페이로드 확인:
   ```json
   {
     "transaction_date": "2025-11-14",
     "items": [
       {
         "item_id": 4388,
         "quantity": 5,
         "unit_price": 10000,
         "notes": ""
       },
       // ... 추가 제품
     ]
   }
   ```
7. [ ] 응답 확인:
   - 성공: 200 OK, 성공 메시지
   - 실패: 4xx/5xx, 에러 메시지
8. [ ] UI에 성공/실패 메시지가 표시되는지 확인
9. [ ] 성공 시 폼이 초기화되는지 확인

**예상 결과**: API 호출 성공, 적절한 피드백 메시지

**스크린샷 캡처**:
- 📸 `26_form_submit_success.png`: 성공 메시지
- 📸 `27_network_request.png`: Network 탭 (요청/응답)

---

### 3.3.6 기능 테스트 종합 체크

**모든 핵심 기능 확인 완료**:
- [ ] 모드 전환 (싱글 ↔ 배치)
- [ ] 제품 추가 (빈 행 생성)
- [ ] 제품 선택 (자동 채우기)
- [ ] 수량 입력 (금액 자동 계산)
- [ ] 제품 제거 (행 삭제 및 재정렬)
- [ ] 탭 생성 (제품 개수만큼)
- [ ] 탭 전환 (BOM 데이터 전환)
- [ ] BOM 데이터 로드 (자동 및 수동)
- [ ] BOM 데이터 독립성 (탭별)

**발견된 버그**:
```
(버그가 있다면 여기에 상세히 기록)
예: 제품 제거 후 탭 인덱스가 잘못 업데이트됨
```

**개선 제안**:
```
(개선 아이디어가 있다면 여기에 기록)
예: 제품 제거 시 확인 다이얼로그 추가
```

---

## 3.4 코드 품질 검증

### 목적
구현 코드가 프로젝트의 품질 기준을 충족하는지 확인합니다.

---

### 3.4.1 TypeScript 타입 체크

**실행 명령어**:
```bash
npm run type-check
```

**확인 항목**:
- [ ] 타입 에러 0개
- [ ] 경고 (warning) 없음 또는 최소화
- [ ] ProductionForm.tsx 컴파일 성공
- [ ] BOMPreviewPanel.tsx 컴파일 성공

**결과 기록**:
```
(type-check 출력 결과를 여기에 붙여넣기)
```

---

### 3.4.2 ESLint 검증

**실행 명령어**:
```bash
npm run lint
```

**확인 항목**:
- [ ] 린트 에러 0개
- [ ] 린트 경고 최소화 (5개 이하)
- [ ] 경고 내용이 심각하지 않음 (예: unused imports)

**결과 기록**:
```
(lint 출력 결과를 여기에 붙여넣기)
```

**경고 분석**:
| 파일 | 경고 내용 | 심각도 | 수정 필요 여부 |
|------|----------|--------|---------------|
| 예: ProductionForm.tsx | unused variable 'x' | 낮음 | 아니오 |

---

### 3.4.3 코드 리뷰 체크리스트

#### ProductionForm.tsx

**파일 위치**: `src/components/ProductionForm.tsx`

**확인 항목**:

| 순번 | 항목 | 확인 | 비고 |
|------|------|------|------|
| 1 | 주석이 적절히 작성되어 있음 | [ ] | 주요 로직에 한글 주석 |
| 2 | 변수명이 명확하고 일관됨 | [ ] | camelCase, 의미 있는 이름 |
| 3 | 불필요한 console.log 없음 | [ ] | 디버깅 코드 제거 확인 |
| 4 | 에러 처리가 적절히 구현됨 | [ ] | try-catch, null 체크 |
| 5 | useState 훅 사용이 적절함 | [ ] | 상태 관리 로직 검토 |
| 6 | useEffect 의존성 배열이 정확함 | [ ] | 무한 루프 방지 |
| 7 | 이벤트 핸들러 네이밍 일관성 | [ ] | handleXxx 형식 |
| 8 | Tailwind 클래스 정리됨 | [ ] | 중복 클래스 없음 |

**코드 샘플 검토**:
- [ ] lines 410-420 (ItemSelect onChange) 타입이 정확함
- [ ] lines 300-350 (handleAddBatchItem) 로직이 명확함
- [ ] lines 450-500 (handleRemoveBatchItem) 인덱스 처리가 정확함

---

#### BOMPreviewPanel.tsx

**파일 위치**: `src/components/inventory/BOMPreviewPanel.tsx`

**확인 항목**:

| 순번 | 항목 | 확인 | 비고 |
|------|------|------|------|
| 1 | Props interface 확장이 명확함 | [ ] | batchMode, batchItems, batchBomChecks |
| 2 | 기본값 설정이 적절함 | [ ] | batchMode = false |
| 3 | 탭 상태 관리가 적절함 | [ ] | activeTabIndex useState |
| 4 | currentBomData 선택 로직이 정확함 | [ ] | Map 조회 안전성 |
| 5 | 조건부 렌더링이 명확함 | [ ] | batchMode 체크 |
| 6 | 탭 렌더링 로직이 효율적임 | [ ] | map 사용 |
| 7 | 스타일 일관성 유지됨 | [ ] | 기존 디자인 따름 |

**코드 샘플 검토**:
- [ ] lines 45-60 (currentBomData 선택 로직) 안전함
- [ ] lines 132-182 (탭 렌더링) 효율적임

---

### 3.4.4 성능 검토 (선택사항)

**확인 항목**:

| 순번 | 항목 | 확인 | 비고 |
|------|------|------|------|
| 1 | 불필요한 리렌더링 없음 | [ ] | React DevTools Profiler 사용 |
| 2 | Map 자료구조 활용이 적절함 | [ ] | O(1) 조회 성능 |
| 3 | 큰 리스트 가상화 필요 없음 | [ ] | 배치 제품 수 일반적으로 < 20개 |
| 4 | 이미지/아이콘 최적화됨 | [ ] | 번들 크기 확인 |

---

### 3.4.5 접근성 검토 (선택사항)

**확인 항목**:

| 순번 | 항목 | 확인 | 비고 |
|------|------|------|------|
| 1 | 버튼에 aria-label 있음 | [ ] | 삭제 버튼 등 |
| 2 | 폼 라벨이 명확함 | [ ] | <label> 태그 사용 |
| 3 | 키보드 네비게이션 가능 | [ ] | Tab 키로 이동 |
| 4 | 포커스 인디케이터 명확함 | [ ] | outline 또는 ring |
| 5 | 색상 대비 충분함 | [ ] | WCAG AA 기준 |

---

### 3.4.6 코드 품질 종합 평가

**총평**:
```
(전반적인 코드 품질 평가를 여기에 작성)
예:
- 타입 안정성: 우수 (타입 에러 0개)
- 가독성: 양호 (주석 충분, 변수명 명확)
- 유지보수성: 우수 (컴포넌트 분리 잘됨)
- 개선 필요: 일부 긴 함수 리팩토링 고려
```

**점수** (선택사항):
- 타입 안정성: __/10
- 가독성: __/10
- 유지보수성: __/10
- 성능: __/10
- 접근성: __/10

**총점**: __/50

---

## 스크린샷 캡처 가이드

### 필수 스크린샷 목록

이 섹션의 모든 스크린샷을 캡처하여 피드백과 함께 제출하면 검증 품질이 향상됩니다.

#### 라이트 모드 (14장)

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 01 | `01_toggle_off.png` | 토글 OFF 상태 |
| 02 | `02_toggle_on.png` | 토글 ON 상태 |
| 03 | `03_table_headers.png` | 테이블 헤더 전체 |
| 04 | `04_add_button.png` | "제품 추가" 버튼 |
| 05 | `05_bom_panel_header.png` | BOM 패널 헤더 |
| 06 | `06_bom_tabs.png` | 탭 네비게이션 (3개 제품) |
| 07 | `07_empty_state_batch.png` | 배치 모드 빈 상태 |
| 08 | `08_empty_state_single.png` | 싱글 모드 빈 상태 |
| 14 | `14_mode_switch_single_to_batch.png` | 싱글→배치 전환 |
| 15 | `15_mode_switch_batch_to_single.png` | 배치→싱글 전환 |
| 16 | `16_add_products.png` | 3개 제품 추가 후 |
| 17 | `17_product_selected.png` | 제품 선택 후 자동 채우기 |
| 18 | `18_quantity_and_amount.png` | 수량 입력 및 금액 계산 |
| 19 | `19_product_removed.png` | 제품 제거 후 |

#### 다크 모드 (7장)

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 09 | `09_dark_toggle.png` | 다크 모드 토글 UI |
| 10 | `10_dark_table.png` | 다크 모드 배치 테이블 |
| 11 | `11_dark_add_button.png` | 다크 모드 버튼 |
| 12 | `12_dark_tabs.png` | 다크 모드 탭 네비게이션 |
| 13 | `13_dark_bom_panel.png` | 다크 모드 BOM 패널 |

#### 탭 네비게이션 (5장)

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 20 | `20_tabs_created.png` | 3개 탭 생성 후 |
| 21 | `21_long_product_name.png` | 긴 제품명 처리 |
| 22 | `22_tab_switching.png` | 세 번째 탭 활성화 |

#### BOM 미리보기 (3장)

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 23 | `23_bom_loaded.png` | BOM 데이터 로드 후 |
| 24 | `24_bom_independence.png` | 다른 탭의 BOM 비교 |
| 25 | `25_bom_not_found.png` | BOM 없는 제품 |

#### 폼 제출 (선택사항, 2장)

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 26 | `26_form_submit_success.png` | 성공 메시지 |
| 27 | `27_network_request.png` | Network 탭 (API 요청/응답) |

### 스크린샷 촬영 팁

1. **전체 화면 vs 부분 캡처**:
   - 컨텍스트가 필요한 경우: 전체 화면 (Windows: Win+Shift+S)
   - 특정 요소 강조: 부분 캡처 (브라우저 개발자 도구 Element 스크린샷)

2. **해상도**:
   - 1920x1080 이상 권장
   - 텍스트가 선명하게 보이도록 확대 (Ctrl+Plus)

3. **파일 형식**:
   - PNG 권장 (무손실, 텍스트 선명)
   - JPEG는 피하기 (압축으로 텍스트 흐릿해짐)

4. **파일명**:
   - 제공된 파일명 그대로 사용
   - 날짜 접두사 추가 가능 (예: 251114_01_toggle_off.png)

5. **저장 위치**:
   - `docs/validation/screenshots/251114/` 디렉토리 생성 권장

---

## 피드백 작성 방법

검증 완료 후 다음 템플릿을 사용하여 피드백을 작성해주세요.

### 피드백 템플릿

```markdown
# Wave 3 배치 생산 UI 검증 결과
**검증자**: [이름]
**검증일**: 2025년 11월 14일
**검증 시간**: [소요 시간]분
**브라우저**: Chrome/Firefox [버전]

---

## 1. 한글 텍스트 검증 결과

### 종합 평가
- [✅/❌] 모든 텍스트가 한글로 표시됨

### 상세 확인 결과
- 토글 라벨: [✅/❌]
- 테이블 헤더 (9개 컬럼): [✅/❌]
- "제품 추가" 버튼: [✅/❌]
- BOM 패널 헤더: [✅/❌]
- 탭 텍스트: [✅/❌]
- 빈 상태 메시지: [✅/❌]

### 발견된 이슈
```
(이슈가 있다면 구체적으로 기술, 없으면 "없음")
```

### 스크린샷 첨부
- [✅/❌] 스크린샷 01-08 첨부함

---

## 2. 다크 모드 검증 결과

### 종합 평가
- [✅/❌] 다크 모드에서 정상 작동
- [✅/❌] 모든 요소의 가독성 확보됨

### 상세 확인 결과
- 토글 UI: [✅/❌]
- 배치 테이블: [✅/❌]
- "제품 추가" 버튼: [✅/❌]
- 탭 네비게이션 (활성/비활성): [✅/❌]
- BOM 패널: [✅/❌]

### 발견된 이슈
```
(이슈가 있다면 구체적으로 기술, 없으면 "없음")
```

### 스크린샷 첨부
- [✅/❌] 스크린샷 09-13 첨부함

---

## 3. 기능 테스트 결과

### 3.1 모드 전환
- [✅/❌] 싱글 → 배치 모드 전환 정상
- [✅/❌] 배치 → 싱글 모드 전환 정상
- **이슈**:
```
(있으면 기술)
```

### 3.2 제품 추가/제거
- [✅/❌] 제품 추가 정상
- [✅/❌] 제품 선택 및 자동 채우기 정상
- [✅/❌] 수량 입력 및 금액 자동 계산 정상
- [✅/❌] 제품 제거 및 행 재정렬 정상
- **이슈**:
```
(있으면 기술)
```

### 3.3 탭 네비게이션
- [✅/❌] 탭 생성 정상 (제품 개수만큼)
- [✅/❌] 탭 전환 정상
- [✅/❌] 긴 제품명 처리 정상 (ellipsis)
- [✅/❌] 탭 호버 효과 정상
- **이슈**:
```
(있으면 기술)
```

### 3.4 BOM 미리보기
- [✅/❌] BOM 데이터 로드 정상
- [✅/❌] 탭별 BOM 독립성 유지
- [✅/❌] BOM 없는 제품 처리 정상
- **이슈**:
```
(있으면 기술)
```

### 3.5 폼 제출 (선택사항)
- [✅/❌/N/A] API 호출 정상
- [✅/❌/N/A] 성공/실패 메시지 표시 정상
- **이슈**:
```
(있으면 기술)
```

### 스크린샷 첨부
- [✅/❌] 스크린샷 14-27 첨부함

---

## 4. 코드 품질 검증 결과

### TypeScript 타입 체크
```
(npm run type-check 출력 결과 붙여넣기)
```
- [✅/❌] 타입 에러 0개
- [✅/❌] 경고 최소화

### ESLint 검증
```
(npm run lint 출력 결과 붙여넣기)
```
- [✅/❌] 린트 에러 0개
- [✅/❌] 린트 경고 5개 이하

### 코드 리뷰
- [✅/❌] 주석 적절함
- [✅/❌] 변수명 명확함
- [✅/❌] 불필요한 console.log 없음
- [✅/❌] 에러 처리 적절함

### 개선 제안
```
(코드 품질 개선 제안이 있다면 기술)
```

---

## 5. 전체 종합 평가

### 5.1 승인 여부
- [ ] **승인 (Production Ready)** - 모든 항목 통과, 즉시 배포 가능
- [ ] **조건부 승인** - 경미한 이슈 있음, 수정 후 배포 가능
- [ ] **재작업 필요** - 중대한 이슈 발견, 수정 후 재검증 필요

### 5.2 발견된 버그 요약
```
(중대 버그가 있다면 여기에 요약)
```

### 5.3 개선 제안 요약
```
(UX/UI 개선 아이디어가 있다면 여기에 요약)
```

### 5.4 추가 의견
```
(자유 형식으로 추가 의견 작성)
```

---

## 첨부 파일 목록
- [ ] 스크린샷 01-08 (라이트 모드)
- [ ] 스크린샷 09-13 (다크 모드)
- [ ] 스크린샷 14-27 (기능 테스트)
- [ ] type-check 출력 (텍스트 파일)
- [ ] lint 출력 (텍스트 파일)
```

---

## 이슈 리포팅 가이드

버그 발견 시 다음 형식으로 상세히 보고해주세요.

### 버그 리포트 템플릿

```markdown
## 버그 #[번호]

### 제목
[한 줄로 버그 요약]

### 심각도
- [ ] Critical (시스템 크래시, 데이터 손실)
- [ ] High (주요 기능 작동 안 함)
- [ ] Medium (기능 일부 작동 안 함)
- [ ] Low (UI 깨짐, 사소한 버그)

### 재현 단계
1. [단계 1]
2. [단계 2]
3. [단계 3]

### 예상 결과
[어떻게 작동해야 하는지]

### 실제 결과
[실제로 어떻게 작동하는지]

### 스크린샷/에러 메시지
```
[스크린샷 첨부 또는 에러 메시지 붙여넣기]
```

### 환경 정보
- 브라우저: [Chrome/Firefox] [버전]
- OS: [Windows 10/11]
- 화면 해상도: [1920x1080]
- 다크 모드: [ON/OFF]

### 추가 정보
[기타 참고 사항]
```

### 버그 심각도 기준

**Critical**:
- 애플리케이션 크래시
- 데이터 손실 또는 손상
- 보안 취약점

**High**:
- 주요 기능이 완전히 작동하지 않음
- 워크플로우 차단
- 대부분의 사용자에게 영향

**Medium**:
- 기능이 부분적으로 작동하지 않음
- 회피 방법(workaround) 존재
- 일부 사용자에게만 영향

**Low**:
- UI/UX 문제 (깨진 레이아웃, 색상 불일치)
- 사소한 텍스트 오류
- 사용성에 미미한 영향

---

## 검증 완료 기준

다음 모든 조건이 충족되어야 Wave 3 검증이 완료됩니다:

### 필수 조건 (Pass Criteria)

1. ✅ **한글 텍스트**: 모든 UI 텍스트가 한글로 정확하게 표시됨
2. ✅ **다크 모드**: 모든 요소가 다크 모드에서 정상 작동 및 가독성 확보
3. ✅ **핵심 기능**: 다음 기능들이 에러 없이 작동
   - 모드 전환 (싱글 ↔ 배치)
   - 제품 추가/제거
   - 탭 네비게이션
   - BOM 미리보기 업데이트
4. ✅ **타입 안정성**: TypeScript 컴파일 에러 0개
5. ✅ **코드 품질**: ESLint 에러 0개, 경고 5개 이하
6. ✅ **중대 버그 없음**: Critical/High 심각도 버그 0개

### 조건부 통과 (Conditional Pass)

다음 조건에서는 조건부 통과 가능:
- Medium 심각도 버그 1-2개 (수정 계획 명확한 경우)
- Low 심각도 버그 5개 이하
- ESLint 경고 5-10개 (심각하지 않은 경우)

### 재작업 필요 (Fail Criteria)

다음 조건 중 하나라도 해당하면 재작업 필요:
- Critical 심각도 버그 1개 이상
- High 심각도 버그 3개 이상
- 핵심 기능 중 하나 이상 작동 안 함
- TypeScript 컴파일 에러 존재
- 한글 텍스트 70% 이하만 표시

---

## 부록

### 부록 A: 구현된 컴포넌트 기술 스펙

#### ProductionForm.tsx 변경사항

**파일 위치**: `src/components/ProductionForm.tsx`

**주요 변경 내역** (Wave 1 & 2):
1. **상태 관리 추가**:
   ```typescript
   const [isBatchMode, setIsBatchMode] = useState<boolean>(false);
   const [batchItems, setBatchItems] = useState<ProductionItem[]>([]);
   const [batchBomChecks, setBatchBomChecks] = useState<Map<number, BOMCheckResponse>>(new Map());
   ```

2. **토글 핸들러**:
   ```typescript
   const handleBatchModeToggle = () => {
     setIsBatchMode(!isBatchMode);
     // 모드 전환 시 상태 초기화
   };
   ```

3. **배치 아이템 관리**:
   ```typescript
   const handleAddBatchItem = () => {
     setBatchItems([...batchItems, {
       product_item_id: 0,
       item_id: 0,
       item_code: '',
       item_name: '',
       quantity: 0,
       unit_price: 0,
       notes: ''
     }]);
   };

   const handleRemoveBatchItem = (index: number) => {
     setBatchItems(batchItems.filter((_, i) => i !== index));
   };
   ```

4. **BOM 로드**:
   ```typescript
   const loadBatchBoms = async (items: ProductionItem[]) => {
     const newChecks = new Map<number, BOMCheckResponse>();
     for (const item of items) {
       if (item.item_id > 0) {
         const bomData = await fetchBomCheck(item.item_id);
         newChecks.set(item.item_id, bomData);
       }
     }
     setBatchBomChecks(newChecks);
   };
   ```

5. **조건부 렌더링**:
   - `isBatchMode === false`: 싱글 모드 UI 표시
   - `isBatchMode === true`: 배치 모드 UI 표시 (BatchItemsTable 컴포넌트)

**Props 변경**: 없음 (내부 상태로만 관리)

---

#### BOMPreviewPanel.tsx 변경사항

**파일 위치**: `src/components/inventory/BOMPreviewPanel.tsx`

**주요 변경 내역** (Wave 2):
1. **Props 확장**:
   ```typescript
   interface BOMPreviewPanelProps {
     // 기존 props
     bomCheckData: BOMCheckResponse | null;
     loading: boolean;
     error: string | null;
     onRefresh?: () => void;

     // 새로운 props (Wave 2)
     batchMode?: boolean;
     batchItems?: ProductionItem[];
     batchBomChecks?: Map<number, BOMCheckResponse>;
   }
   ```

2. **탭 상태 관리**:
   ```typescript
   const [activeTabIndex, setActiveTabIndex] = useState(0);
   ```

3. **현재 BOM 데이터 선택**:
   ```typescript
   const currentBomData = batchMode && batchBomChecks && batchItems[activeTabIndex]
     ? batchBomChecks.get(batchItems[activeTabIndex].item_id) || null
     : bomCheckData;
   ```

4. **탭 렌더링**:
   ```typescript
   {batchMode && batchItems && batchItems.length > 0 && (
     <div className="flex space-x-2 overflow-x-auto border-b pb-2">
       {batchItems.map((item, index) => (
         <button
           key={index}
           onClick={() => setActiveTabIndex(index)}
           className={`px-4 py-2 rounded-t-lg transition-colors ${
             activeTabIndex === index
               ? 'bg-white dark:bg-gray-700 text-blue-600 border-b-2 border-blue-500'
               : 'bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800'
           }`}
         >
           <span className="text-sm font-medium">
             {item.item_code || '미선택'} {item.item_name && `- ${item.item_name}`}
           </span>
         </button>
       ))}
     </div>
   )}
   ```

**하위 호환성**: 기존 싱글 모드 사용은 영향 없음 (기본값 `batchMode = false`)

---

#### BatchItemsTable 컴포넌트 (신규)

**파일 위치**: `src/components/inventory/BatchItemsTable.tsx` (가정)

**주요 기능**:
- 배치 제품 목록을 테이블로 표시
- 각 행에서 제품 선택, 수량 입력, 금액 자동 계산
- 제품 추가/제거 기능

**Props**:
```typescript
interface BatchItemsTableProps {
  items: ProductionItem[];
  onItemChange: (index: number, field: keyof ProductionItem, value: any) => void;
  onRemoveItem: (index: number) => void;
}
```

**특징**:
- ItemSelect 컴포넌트 통합
- 금액 자동 계산: `quantity * unit_price`
- 한글 헤더 사용
- 다크 모드 지원

---

### 부록 B: API 엔드포인트 정보

#### POST /api/inventory/production/batch

**목적**: 다중 제품 생산 입고 등록

**요청 형식**:
```typescript
{
  transaction_date: string;  // ISO 8601 format
  items: Array<{
    item_id: number;
    quantity: number;
    unit_price: number;
    reference_no?: string;
    notes?: string;
  }>;
}
```

**응답 형식** (성공):
```typescript
{
  success: true;
  data: {
    transaction_ids: number[];  // 생성된 거래 ID 배열
    message: string;
  }
}
```

**응답 형식** (실패):
```typescript
{
  success: false;
  error: string;
}
```

**에러 케이스**:
- 400 Bad Request: 필수 필드 누락, 유효성 검증 실패
- 404 Not Found: 존재하지 않는 item_id
- 500 Internal Server Error: 데이터베이스 에러

**참고 파일**: `src/app/api/inventory/production/batch/route.ts`

---

### 부록 C: 트러블슈팅 가이드

#### 문제 1: 개발 서버가 시작되지 않음

**증상**:
```
Error: listen EADDRINUSE: address already in use :::5000
```

**원인**: 포트 5000이 이미 사용 중

**해결책**:
```bash
# 방법 1: 포트 정리 스크립트 사용
npm run port:kill

# 방법 2: 완전 재시작
npm run restart

# 방법 3: 수동으로 프로세스 종료 (Windows)
netstat -ano | findstr :5000
taskkill /PID [PID번호] /F
```

---

#### 문제 2: 타입 에러 발생

**증상**:
```
error TS2322: Type 'X' is not assignable to type 'Y'
```

**원인**: 타입 불일치 또는 타입 정의 누락

**해결책**:
1. 타입 정의 파일 확인: `src/types/inventory.ts`
2. 타입 재생성: `npm run db:types`
3. 캐시 정리: `npm run clean && npm install`
4. IDE 재시작 (VSCode: Ctrl+Shift+P → "Reload Window")

---

#### 문제 3: 한글 깨짐 발생

**증상**: UI에서 한글이 "ë¶€í'ˆ" 같은 형태로 표시

**원인**: UTF-8 인코딩 문제

**해결책**:
1. 브라우저 인코딩 확인: 개발자 도구 → 설정 → UTF-8
2. 파일 인코딩 확인: VSCode에서 파일을 UTF-8로 저장
3. API 응답 헤더 확인:
   ```typescript
   // route.ts에서
   return new Response(JSON.stringify(data), {
     headers: {
       'Content-Type': 'application/json; charset=utf-8'
     }
   });
   ```

---

#### 문제 4: BOM 데이터가 로드되지 않음

**증상**: BOM 패널이 빈 상태로 유지됨

**원인**:
- 제품에 BOM이 등록되지 않음
- API 에러 발생
- 네트워크 문제

**해결책**:
1. 개발자 도구 Console 탭에서 에러 확인
2. Network 탭에서 API 호출 확인:
   - `/api/bom/check?item_id=XXX` 요청 확인
   - 응답 상태 코드 확인 (200 OK?)
3. 데이터베이스 확인:
   ```sql
   SELECT * FROM bom_items WHERE item_id = [제품ID];
   ```
4. BOM 미등록 제품인 경우: 정상 동작 (안내 메시지 표시)

---

#### 문제 5: 다크 모드가 적용되지 않음

**증상**: 다크 모드 활성화 후에도 밝은 테마로 표시

**원인**:
- Tailwind dark 모드 설정 누락
- CSS 클래스 적용 누락
- 브라우저 캐시 문제

**해결책**:
1. `tailwind.config.ts`에서 dark 모드 확인:
   ```typescript
   darkMode: 'media', // 또는 'class'
   ```
2. 강제 새로고침: Ctrl+Shift+R
3. 브라우저 캐시 삭제
4. 개발자 도구에서 수동 확인:
   - Elements 탭에서 `dark` 클래스 확인
   - Computed 스타일에서 dark: 변수 확인

---

#### 문제 6: 탭 전환이 느림

**증상**: 탭 클릭 후 BOM 데이터 로드에 시간이 걸림

**원인**: BOM API 호출이 매번 발생

**해결책**:
- 정상 동작 (BOM 데이터는 캐싱되어야 함)
- 개선 방안 (향후):
  - React Query로 BOM 데이터 캐싱
  - 탭 전환 시 Map에서 즉시 조회
  - 프리페칭 구현

**현재 상태**: Wave 2에서는 Map 기반 캐싱 구현됨

---

## 검증 완료 후

검증을 완료하셨다면:

1. ✅ 이 문서의 체크리스트를 모두 확인
2. ✅ 필수 스크린샷 캡처 (최소 14장)
3. ✅ 피드백 템플릿 작성
4. ✅ 발견된 버그를 이슈 리포트 형식으로 작성
5. ✅ 다음 위치에 결과 제출:
   - 피드백 파일: `docs/validation/VALIDATION_FEEDBACK_251114.md`
   - 스크린샷: `docs/validation/screenshots/251114/`
   - 버그 리포트: `docs/validation/BUG_REPORTS_251114.md`

또는 개발팀에게 직접 전달해주세요!

---

**문의사항이 있으시면 언제든지 물어보세요. 검증 작업에 감사드립니다!** 🙏
