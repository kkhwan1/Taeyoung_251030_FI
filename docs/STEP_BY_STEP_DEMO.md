# 단계별 실전 데모 가이드

**작성일**: 2025-01-27  
**목적**: 사용자가 실제 시스템을 어떻게 사용하는지 정확히 이해하기 위한 가이드

---

## 목차

1. [시작하기 전](#1-시작하기-전)
2. [1단계: 거래처 등록](#2-1단계-거래처-등록)
3. [2단계: 품목 등록](#3-2단계-품목-등록)
4. [3단계: BOM 등록](#4-3단계-bom-등록)
5. [4단계: 입고 (재고 생성)](#5-4단계-입고-재고-생성)
6. [5단계: 생산 (BOM 자동 차감)](#6-5단계-생산-bom-자동-차감)
7. [6단계: 재고 현황 확인](#7-6단계-재고-현황-확인)
8. [결과 검증](#8-결과-검증)

---

## 1. 시작하기 전

### 현재 상태

- **거래처**: 0개
- **품목**: 1,247개 (기존 데이터)
- **BOM**: 0개
- **재고 거래**: 0건

### 삭제할 데이터

기존 테스트 데이터를 모두 삭제하고 처음부터 다시 시작합니다.

---

## 2. 1단계: 거래처 등록

### 목표
공급사 1개를 등록합니다.

### 입력 데이터

```
거래처명: 동일철강
타입: 공급사
사업자번호: 123-45-67890
담당자: 김철수
전화번호: 02-1234-5678
이메일: contact@dongil.com
결제조건: 현금 30일
```

### 입력 방법

1. 메뉴: 기준정보 > 거래처관리
2. "거래처 등록" 버튼 클릭
3. 폼 입력:
   - 거래처명: 동일철강
   - 타입: 공급사 선택 (드롭다운)
   - 사업자번호: 123-45-67890
   - 담당자: 김철수
   - 전화번호: 02-1234-5678
   - 이메일: contact@dongil.com
   - 결제조건: 30 입력
4. "등록" 버튼 클릭

### 결과 확인

- "거래처가 성공적으로 등록되었습니다." 메시지 표시
- 테이블에 "동일철강" 행 추가 확인

---

## 3. 2단계: 품목 등록

### 목표
원자재 3개, 완제품 1개를 등록합니다.

### 입력 데이터

#### 원자재 1: 냉간압연강판
```
품목코드: RAW-001
품목명: 냉간압연강판 1.0T
분류: 원자재
타입: 원자재 (RAW)
소재형태: 기타 (OTHER)
단위: EA
기준단가: 10,000원
안전재고: 100
```

#### 원자재 2: 볼트
```
품목코드: RAW-002
품목명: M6 볼트
분류: 원자재
타입: 원자재 (RAW)
소재형태: 기타 (OTHER)
단위: EA
기준단가: 50원
안전재고: 1,000
```

#### 원자재 3: ABS 케이스
```
품목코드: RAW-003
품목명: ABS 수지 케이스
분류: 원자재
타입: 원자재 (RAW)
소재형태: 기타 (OTHER)
단위: EA
기준단가: 2,000원
안전재고: 50
```

#### 완제품: 브레이크 패드
```
품목코드: PROD-001
품목명: 브레이크 패드
분류: 제품
타입: 완제품 (FINISHED)
소재형태: 기타 (OTHER)
단위: EA
기준단가: 50,000원
안전재고: 10
```

### 입력 방법

1. 메뉴: 기준정보 > 품목관리
2. "품목 등록" 버튼 클릭
3. 필수 정보 입력:
   - 품목코드: RAW-001
   - 품목명: 냉간압연강판 1.0T
   - 분류: 원자재 선택
   - 타입: 원자재 (RAW) 선택
   - 단위: EA 선택
   - 기준단가: 10,000
4. "등록" 버튼 클릭
5. 위 과정을 RAW-002, RAW-003, PROD-001에 대해 반복

### 결과 확인

- "품목이 등록되었습니다." 메시지 (각 품목당)
- 테이블에 4개 품목 추가 확인

---

## 4. 3단계: BOM 등록

### 목표
완제품 1개를 구성하는 원자재를 등록합니다.

### BOM 구성

```
PROD-001 (브레이크 패드) 구성:
- RAW-001 (냉간압연강판 1.0T) × 2개
- RAW-002 (M6 볼트) × 4개
- RAW-003 (ABS 수지 케이스) × 1개
```

### 입력 방법

1. 메뉴: 기준정보 > BOM관리
2. "BOM 등록" 버튼 클릭
3. 완제품 선택: PROD-001 (브레이크 패드)
4. 원자재 추가:
   - 품목: RAW-001 선택
   - 수량: 2
   - "추가" 버튼 클릭
   - 품목: RAW-002 선택
   - 수량: 4
   - "추가" 버튼 클릭
   - 품목: RAW-003 선택
   - 수량: 1
   - "추가" 버튼 클릭
5. "등록" 버튼 클릭

### 결과 확인

- "BOM이 등록되었습니다." 메시지
- BOM 테이블에 "PROD-001" 행 추가 확인
- 하위 원자재 3개 표시 확인

---

## 5. 4단계: 입고 (재고 생성)

### 목표
원자재 3개에 대한 입고를 등록하여 재고를 생성합니다.

### 입력 데이터

```
입고 1:
거래일자: 2025-01-27
공급사: 동일철강 (선택)
품목: RAW-001 (냉간압연강판 1.0T)
수량: 1,000개
단가: 10,000원

입고 2:
거래일자: 2025-01-27
공급사: 동일철강
품목: RAW-002 (M6 볼트)
수량: 10,000개
단가: 50원

입고 3:
거래일자: 2025-01-27
공급사: 동일철강
품목: RAW-003 (ABS 수지 케이스)
수량: 500개
단가: 2,000원
```

### 입력 방법

1. 메뉴: 재고관리 > 입고관리
2. "입고 등록" 버튼 클릭
3. 입고 1 등록:
   - 거래일자: 2025-01-27 선택
   - 공급사: "동일철강" 선택 (드롭다운)
   - 품목: "RAW-001" 선택 (드롭다운)
   - 수량: 1,000 입력
   - 단가: 10,000 입력 (자동 입력됨)
   - "등록" 버튼 클릭
4. 입고 2, 3도 동일하게 반복

### 결과 확인

- "입고가 등록되었습니다." 메시지 (각 입고당)
- 입고 테이블에 3건 추가 확인
- 품목관리에서 재고 확인:
  - RAW-001: 현재고 1,000개
  - RAW-002: 현재고 10,000개
  - RAW-003: 현재고 500개

---

## 6. 5단계: 생산 (BOM 자동 차감)

### 목표
완제품 10개를 생산하여 원자재가 자동으로 차감되는지 확인합니다.

### 입력 데이터

```
생산 등록:
거래일자: 2025-01-27
품목: PROD-001 (브레이크 패드)
수량: 10개
```

### 입력 방법

1. 메뉴: 재고관리 > 생산관리
2. "생산 등록" 버튼 클릭
3. 폼 입력:
   - 거래일자: 2025-01-27 선택
   - 품목: "PROD-001 (브레이크 패드)" 선택 (드롭다운)
   - 수량: 10 입력
4. "등록" 버튼 클릭

### 시스템 자동 처리 내역

```
1. BOM 조회 (PROD-001)
   ✓ RAW-001 (냉간압연강판) × 2
   ✓ RAW-002 (M6 볼트) × 4
   ✓ RAW-003 (ABS 수지 케이스) × 1

2. 필요 수량 계산
   - 냉간압연강판: 10개 × 2 = 20개 필요
   - M6 볼트: 10개 × 4 = 40개 필요
   - ABS 수지 케이스: 10개 × 1 = 10개 필요

3. 재고 충분성 검증
   - 냉간압연강판: 현재 1,000개 ≥ 필요 20개 ✅
   - M6 볼트: 현재 10,000개 ≥ 필요 40개 ✅
   - ABS 수지 케이스: 현재 500개 ≥ 필요 10개 ✅

4. 데이터베이스 트랜잭션 시작
   
5. inventory_transactions INSERT:
   - 생산입고: PROD-001 10개
   - 생산출고: RAW-001 20개 (자동)
   - 생산출고: RAW-002 40개 (자동)
   - 생산출고: RAW-003 10개 (자동)

6. items.current_stock 업데이트:
   - PROD-001 (브레이크 패드): 0 → 10개 (+10)
   - RAW-001 (냉간압연강판): 1,000 → 980개 (-20)
   - RAW-002 (M6 볼트): 10,000 → 9,960개 (-40)
   - RAW-003 (ABS 수지 케이스): 500 → 490개 (-10)

7. bom_deduction_log INSERT (3건)
   - 완제품: PROD-001
   - 원자재: RAW-001, 차감 수량: 20
   - 원자재: RAW-002, 차감 수량: 40
   - 원자재: RAW-003, 차감 수량: 10

8. 트랜잭션 커밋
```

### 결과 확인

- "생산이 등록되었습니다." 메시지
- 품목관리에서 재고 확인:
  - PROD-001: 현재고 10개 (+10)
  - RAW-001: 현재고 980개 (-20)
  - RAW-002: 현재고 9,960개 (-40)
  - RAW-003: 현재고 490개 (-10)

---

## 7. 6단계: 재고 현황 확인

### 목표
모든 품목의 현재 재고를 확인합니다.

### 확인 방법

1. 메뉴: 재고현황 > 재고 현황
2. 품목 필터: 전체 또는 특정 분류
3. 재고 현황 테이블 확인

### 예상 결과

```
품목코드 | 품목명           | 현재고 | 안전재고 | 상태
---------|------------------|--------|----------|------
RAW-001  | 냉간압연강판 1.0T | 980    | 100      | 정상
RAW-002  | M6 볼트          | 9,960  | 1,000    | 정상
RAW-003  | ABS 수지 케이스   | 490    | 50       | 정상
PROD-001 | 브레이크 패드     | 10     | 10       | 정상
```

### 재고 이력 확인

1. 메뉴: 재고현황 > 재고이력
2. 필터: "PROD-001" 또는 "RAW-001"
3. 최근 거래 확인:
   - 생산입고: PROD-001 10개
   - 생산출고: RAW-001 20개
   - 생산출고: RAW-002 40개
   - 생산출고: RAW-003 10개

---

## 8. 결과 검증

### 데이터베이스 직접 확인 (Supabase MCP)

```sql
-- 1. 거래처 확인
SELECT company_name, company_type 
FROM companies 
WHERE company_name = '동일철강';

-- 2. 품목 확인
SELECT item_code, item_name, current_stock 
FROM items 
WHERE item_code IN ('RAW-001', 'RAW-002', 'RAW-003', 'PROD-001')
ORDER BY item_code;

-- 3. BOM 확인
SELECT 
  p.item_code as parent_code,
  p.item_name as parent_name,
  c.item_code as child_code,
  c.item_name as child_name,
  b.quantity
FROM bom b
JOIN items p ON b.parent_item_id = p.item_id
JOIN items c ON b.child_item_id = c.item_id
WHERE p.item_code = 'PROD-001';

-- 4. 재고 거래 확인
SELECT 
  transaction_type,
  item_id,
  quantity,
  notes
FROM inventory_transactions
ORDER BY created_at DESC
LIMIT 10;

-- 5. BOM 차감 로그 확인
SELECT 
  bdl.parent_item_id,
  bdl.child_item_id,
  bdl.required_quantity,
  bdl.actual_deducted,
  bdl.stock_before,
  bdl.stock_after
FROM bom_deduction_log bdl
ORDER BY created_at DESC
LIMIT 10;
```

### 예상 결과

#### 거래처
```
company_name: 동일철강
company_type: SUPPLIER
```

#### 품목
```
RAW-001: 980개 (입고 1,000 - 차감 20)
RAW-002: 9,960개 (입고 10,000 - 차감 40)
RAW-003: 490개 (입고 500 - 차감 10)
PROD-001: 10개 (생산 10)
```

#### BOM
```
3건:
1. PROD-001 → RAW-001 × 2
2. PROD-001 → RAW-002 × 4
3. PROD-001 → RAW-003 × 1
```

#### 재고 거래
```
총 7건:
- 입고 3건 (RAW-001, RAW-002, RAW-003)
- 생산입고 1건 (PROD-001 10개)
- 생산출고 3건 (RAW-001 20, RAW-002 40, RAW-003 10)
```

#### BOM 차감 로그
```
3건:
1. PROD-001 → RAW-001: 20개 차감 (1,000 → 980)
2. PROD-001 → RAW-002: 40개 차감 (10,000 → 9,960)
3. PROD-001 → RAW-003: 10개 차감 (500 → 490)
```

---

## 다음 단계

이 기본 시나리오가 완료되면:

1. **재고 부족 테스트**
   - PROD-001 100개 생산 시도
   - 재고 부족 에러 확인

2. **출고 등록**
   - PROD-001 5개 출고

3. **회계 관리**
   - 매출 등록: PROD-001 5개 판매
   - 수금 등록: 전액 수금

4. **대규모 테스트**
   - 품목 100개 추가 등록
   - 입고 100건 등록
   - 생산 100건 등록
   - 성능 및 정합성 검증

---

**문서 끝**


