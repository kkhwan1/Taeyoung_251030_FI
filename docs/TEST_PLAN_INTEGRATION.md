# 전체 시스템 통합 테스트 계획

## 테스트 목표
실제 업무 흐름대로 전체 프로세스를 검증하여 시스템의 통합성과 안정성을 확인합니다.

---

## 1. 전체 워크플로우 통합 테스트

### 시나리오 A: 입고 → 생산 → 출고 전체 흐름

#### 1.1 원자재 입고 (`/inventory?tab=receiving`)

**테스트 절차:**
1. 입고 관리 페이지 접속
2. "입고 등록" 버튼 클릭
3. 다음 정보 입력:
   - 거래일자: 오늘 날짜
   - 품목: 원자재 선택 (예: TEST-RAW-001)
   - 수량: 100
   - 단가: 1000
   - 거래처: 공급사 선택
   - 참조번호: 자동 생성 또는 수동 입력
4. "저장" 버튼 클릭

**검증 사항:**
- ✅ 입고 거래 등록 성공
- ✅ 재고 증가 확인 (`/stock` 페이지에서 확인)
- ✅ 거래 내역 목록에 표시
- ✅ 재고 이력에 기록됨

**API 엔드포인트:**
- `POST /api/inventory/receiving`

---

#### 1.2 BOM 확인 (`/master/bom`)

**테스트 절차:**
1. BOM 관리 페이지 접속
2. 완제품 선택 (예: 50011106C)
3. BOM 구조 확인:
   - 필요한 원자재 목록
   - 각 원자재의 필요 수량
   - 현재 재고 상태

**검증 사항:**
- ✅ BOM 구조 정상 표시
- ✅ 원자재 재고 상태 표시
- ✅ 재고 충분/부족 표시

**API 엔드포인트:**
- `GET /api/bom?parent_item_id={id}`

---

#### 1.3 배치 생산 (`/inventory?tab=production`)

**테스트 절차:**
1. 생산 관리 페이지 접속
2. "생산 등록" 버튼 클릭
3. 배치 모드 활성화
4. 여러 제품 추가:
   - 제품 1: 50011106C, 수량 10
   - 제품 2: 50009971C, 수량 5
5. BOM 자동 로드 확인
6. "등록" 버튼 클릭

**검증 사항:**
- ✅ 생산 거래 등록 성공
- ✅ 원자재 자동 차감 확인
- ✅ 완제품 재고 증가 확인
- ✅ BOM 차감 로그 기록
- ✅ 재고 이력에 기록됨

**API 엔드포인트:**
- `POST /api/inventory/production/batch`

---

#### 1.4 공정 추적 (`/process`)

**테스트 절차:**
1. 공정 관리 페이지 접속
2. "공정 등록" 버튼 클릭
3. 공정 정보 입력:
   - 투입재료: 원자재 선택
   - 산출제품: 완제품 선택
   - 투입수량: 100
   - 산출수량: 95
4. "등록" 버튼 클릭
5. "공정 시작" 버튼 클릭
6. "공정 완료" 버튼 클릭

**검증 사항:**
- ✅ 공정 등록 성공
- ✅ LOT 번호 자동 생성 (예: BLK-YYYYMMDD-XXX)
- ✅ 공정 시작 시 상태 변경 (대기중 → 진행중)
- ✅ 공정 완료 시 상태 변경 (진행중 → 완료)
- ✅ 재고 이동 내역 기록

**API 엔드포인트:**
- `POST /api/process-operations`
- `PATCH /api/process-operations/{id}/start`
- `PATCH /api/process-operations/{id}/complete`

---

#### 1.5 제품 출고 (`/inventory?tab=shipping`)

**테스트 절차:**
1. 출고 관리 페이지 접속
2. "출고 등록" 버튼 클릭
3. 출고 정보 입력:
   - 거래일자: 오늘 날짜
   - 품목: 완제품 선택 (예: 50011106C)
   - 수량: 20
   - 단가: 5000
   - 거래처: 고객사 선택
   - 참조번호: 자동 생성
4. "저장" 버튼 클릭

**검증 사항:**
- ✅ 출고 거래 등록 성공
- ✅ 재고 감소 확인
- ✅ 거래 내역 목록에 표시
- ✅ 재고 이력에 기록됨

**API 엔드포인트:**
- `POST /api/inventory/shipping`

---

#### 1.6 매출 등록 (`/sales`)

**테스트 절차:**
1. 매출 관리 페이지 접속
2. "매출 등록" 버튼 클릭
3. 출고 거래 기반 매출 등록:
   - 출고 거래 선택 또는 수동 입력
   - 고객사: 출고 거래의 거래처
   - 품목: 출고 거래의 품목
   - 수량: 출고 거래의 수량
   - 단가: 출고 거래의 단가
4. "저장" 버튼 클릭

**검증 사항:**
- ✅ 매출 거래 등록 성공
- ✅ 매출 거래 목록에 표시
- ✅ 미수금 자동 계산

**API 엔드포인트:**
- `POST /api/sales`

---

#### 1.7 수금 등록 (`/collections`)

**테스트 절차:**
1. 수금 관리 페이지 접속
2. "수금 등록" 버튼 클릭
3. 수금 정보 입력:
   - 거래일자: 오늘 날짜
   - 고객사: 매출 거래의 고객사
   - 수금 금액: 매출 금액의 일부 또는 전액
   - 참조번호: 자동 생성
4. "저장" 버튼 클릭

**검증 사항:**
- ✅ 수금 거래 등록 성공
- ✅ 미수금 자동 차감
- ✅ 수금 내역 목록에 표시

**API 엔드포인트:**
- `POST /api/collections`

---

### 시나리오 B: 재고 부족 시 경고 및 처리

**테스트 절차:**
1. 재고 부족 상태의 원자재 확인
2. 생산 등록 시도:
   - 완제품 선택
   - 수량 입력
   - BOM 확인
3. 재고 부족 경고 메시지 확인
4. 생산 진행 여부 선택
5. 재고 조정으로 해결:
   - `/stock?tab=adjustment` 페이지 접속
   - 부족한 원자재 재고 증가
6. 생산 재시도

**검증 사항:**
- ✅ 재고 부족 경고 메시지 표시
- ✅ 생산 진행 여부 선택 가능
- ✅ 재고 조정 후 생산 가능
- ✅ 재고 부족 시에도 생산 진행 가능 (경고만 표시)

---

## 2. 대시보드 실시간 업데이트 테스트

**테스트 절차:**
1. 대시보드 페이지 열기 (`/dashboard`)
2. 자동 새로고침 설정 (5분)
3. 새 거래 등록 (입고/출고/생산)
4. 대시보드 위젯 자동 업데이트 확인:
   - 재고 현황
   - 재고 분류
   - LOT 추적
   - 최근 거래 내역

**검증 사항:**
- ✅ 거래 발생 시 대시보드 자동 업데이트
- ✅ 위젯 데이터 실시간 반영
- ✅ 새로고침 버튼으로 수동 업데이트 가능

---

## 3. Excel 내보내기 전체 테스트

**테스트 항목:**
- 매출 거래 내보내기 (`/export/sales`)
- 매입 거래 내보내기 (`/export/purchases`)
- 수금 내역 내보내기 (`/export/collections`)
- 지급 내역 내보내기 (`/export/payments`)
- 재고 현황 내보내기
- BOM 내보내기

**검증 사항:**
- ✅ 한글 인코딩 정상
- ✅ 3-Sheet 구조 (메타데이터, 통계, 데이터)
- ✅ 데이터 정확성

---

## 4. 필터링 및 검색 성능 테스트

**테스트 항목:**
- 품목 검색 (`/master/items`)
- 거래 내역 필터링 (`/inventory`)
- 재고 이력 조회

**성능 기준:**
- 검색 응답: < 2초
- 필터 적용: < 1초
- 페이지 전환: < 500ms

---

## 5. 에러 처리 및 복구 테스트

**테스트 시나리오:**
- 필수 필드 누락
- 중복 코드 입력
- 잘못된 날짜 입력
- 네트워크 오류 시뮬레이션

---

## 6. 모바일 반응형 테스트

**테스트 절차:**
- Chrome DevTools 모바일 모드 활성화
- 각 페이지 레이아웃 확인
- 테이블 가로 스크롤
- 버튼 크기 적절
- 모달 크기 조정
- 터치 인터랙션

---

## 테스트 결과 기록

각 테스트 항목별로 다음 정보를 기록합니다:
- 테스트 일시
- 테스트 결과 (성공/실패)
- 발견된 이슈
- 수정 사항

